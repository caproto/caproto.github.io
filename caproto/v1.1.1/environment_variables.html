<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Environment Variables &mdash; caproto 1.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/inheritance.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=7a812f30"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="_static/docs-versions-menu.js?v=302f4f97"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Shark (pcap/tcpdump parsing)" href="shark.html" />
    <link rel="prev" title="Servers" href="servers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            caproto
          </a>
              <div class="version">
                1.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Caproto</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="servers.html">Servers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="shark.html">Shark (pcap/tcpdump parsing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="loggers.html">Logging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">IOCs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="iocs.html">Input-Output Controllers (IOCs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="records.html">Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookiecutter.html">IOC Template Cookiecutters</a></li>
<li class="toctree-l1"><a class="reference internal" href="own_docs.html">Writing Your Own Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_api.html">Server API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Channel Access Sans I/O</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Writing Your Own Channel Access Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Core API Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="protocol-compliance.html">Details of our Protocol Compliance for CA Nerds</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Caproto-in-a-box</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">caproto</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Environment Variables</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/environment_variables.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="environment-variables">
<h1>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this heading">¶</a></h1>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Client Environment Variables</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CAPROTO_DEFAULT_TIMEOUT</p></td>
<td><p>2.0</p></td>
<td><p>The default timeout to use for client connections and reading.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_STRING_ENCODING</p></td>
<td><p>“latin-1”</p></td>
<td><p>The default string encoding to use.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_CLIENT_AUTOMONITOR_MAXLENGTH</p></td>
<td><p>65536</p></td>
<td><p>Toggle automatic monitoring of PVs based on this.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_CLIENT_BEACON_MARGIN_SEC</p></td>
<td><p>1</p></td>
<td><p>The margin after EPICS_CA_CONN_TMO for beacons to arrive (seconds).</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_CLIENT_EVENT_ADD_BATCH_MAX_BYTES</p></td>
<td><p>2**16 = 65536</p></td>
<td><p>Requests are batched when sent on the wire if they are under this
threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_CLIENT_MAX_RETRY_SEARCHES_INTERVAL_SEC</p></td>
<td><p>5</p></td>
<td><p>Retry searches for PVs at this interval, in seconds.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_CLIENT_MIN_RETRY_SEARCHES_INTERVAL_SEC</p></td>
<td><p>0.03</p></td>
<td><p>Minimum interval for retrying searches, in seconds.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_CLIENT_RESTART_SUBS_PERIOD_SEC</p></td>
<td><p>0.1</p></td>
<td><p>After a circuit reconnection, wait this number of seconds and then re-activate
previous subscriptions.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_CLIENT_RETRY_RETIRED_SEARCHES_INTERVAL_SEC</p></td>
<td><p>60</p></td>
<td><p>For the searches older than SEARCH_RETIREMENT_AGE, we adopt a slower
period to minimize network traffic. We only resend every
RETRY_RETIRED_SEARCHES_INTERVAL or, again, whenever new searches are
added.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_CLIENT_SEARCH_RETIREMENT_AGE_SEC</p></td>
<td><p>480</p></td>
<td><p>We then frequently retry the unanswered searches that are younger than
SEARCH_RETIREMENT_AGE, backing off from an interval of
MIN_RETRY_SEARCHES_INTERVAL to MAX_RETRY_SEARCHES_INTERVAL. The interval
is reset to MIN_RETRY_SEARCHES_INTERVAL each time new searches are
added. Units are in seconds.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CA_ADDR_LIST</p></td>
<td><p>‘’</p></td>
<td><p>The client address list.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CA_AUTO_ADDR_LIST</p></td>
<td><p>‘YES’</p></td>
<td><p>Whether or not to automatically determine the address list.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CA_CONN_TMO</p></td>
<td><p>30.0</p></td>
<td><p>Connection timeout.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CA_BEACON_PERIOD</p></td>
<td><p>15.0</p></td>
<td><p>Beacon broadcast period.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CA_REPEATER_PORT</p></td>
<td><p>5065</p></td>
<td><p>Port for the repeater.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CA_SERVER_PORT</p></td>
<td><p>5064</p></td>
<td><p>Default port for the server.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CA_MAX_ARRAY_BYTES</p></td>
<td><p>16384</p></td>
<td><p>Max bytes as a client. Caproto does not support this.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CA_MAX_SEARCH_PERIOD</p></td>
<td><p>300</p></td>
<td><p>Maximum search period.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_TS_MIN_WEST</p></td>
<td><p>360</p></td>
<td><p>Caproto does not support this.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Server Environment Variables</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EPICS_CAS_SERVER_PORT</p></td>
<td><p>5064</p></td>
<td><p>Default server port.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CAS_AUTO_BEACON_ADDR_LIST</p></td>
<td><p>‘YES’</p></td>
<td><p>Automatically determine beacon address lists.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CAS_BEACON_ADDR_LIST</p></td>
<td><p>‘’</p></td>
<td><p>Manual beacon address list.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CAS_BEACON_PERIOD</p></td>
<td><p>15.0</p></td>
<td><p>Beacon broadcast period.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CAS_BEACON_PORT</p></td>
<td><p>5065</p></td>
<td><p>Beacon UDP port.</p></td>
</tr>
<tr class="row-odd"><td><p>EPICS_CAS_INTF_ADDR_LIST</p></td>
<td><p>‘’</p></td>
<td><p>Interfaces to listen on.</p></td>
</tr>
<tr class="row-even"><td><p>EPICS_CAS_IGNORE_ADDR_LIST</p></td>
<td><p>‘’</p></td>
<td><p>Interfaces to ignore.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_SERVER_HIGH_LOAD_TIMEOUT_SEC</p></td>
<td><p>0.01</p></td>
<td><p>Tuning this parameters will affect the server’s performance under high
load. If the queue of subscriptions to has a new update ready within
this timeout, we consider ourselves under high load and trade accept
some latency for some efficiency.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_SERVER_HIGH_LOAD_EVENT_TIME_THRESHOLD_SEC</p></td>
<td><p>0.1</p></td>
<td><p>If events are toggled by the client, subscriptions values get garbage-
collected.  It’s not a high load situation.  Let’s warn only if we’re
relatively sure that it wasn’t due to recent event toggling.  You
probably shouldn’t need to change this.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_SERVER_HIGH_LOAD_WARN_LATENCY_SEC</p></td>
<td><p>0.03</p></td>
<td><p>Warn the user if packets are delayed by more than this amount: 30ms.
Set to 0 to disable the warning entirely.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_SERVER_SUB_BATCH_THRESH</p></td>
<td><p>2 ** 16</p></td>
<td><p>When a batch of subscription updates has this many bytes or more, send
it.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_SERVER_MAX_LATENCY_SEC</p></td>
<td><p>1.0</p></td>
<td><p>Tune this to change the max time between packets, in seconds. If it’s
too high, the client will experience long gaps when the server is under
load. If it’s too low, the <em>overall</em> latency will be higher because the
server will have to waste time bundling many small packets.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_SERVER_WRITE_LOCK_TIMEOUT_SEC</p></td>
<td><p>0.001</p></td>
<td><p>If a Read[Notify]Request or EventAddRequest is received, wait for up to
this many seconds for the currently-processing Write[Notify]Request to
finish.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Shared Environment Variables</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>CAPROTO_STALE_SEARCH_EXPIRATION_SEC</p></th>
<th class="head"><p>10.0</p></th>
<th class="head"><p>How long, in seconds, after which to consider searches for PVs “stale”.</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CAPROTO_RESPONSIVENESS_TIMEOUT_SEC</p></td>
<td><p>5</p></td>
<td><p>How long to wait between EchoRequest and EchoResponse before concluding that
server is unresponsive, in seconds.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_MAX_TOTAL_SUBSCRIPTION_BACKLOG</p></td>
<td><p>10000</p></td>
<td><p>Total per circuit (not per subscription), by default.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_SUBSCRIPTION_BACKLOG_WARN_THRESHOLD_ELEMENTS</p></td>
<td><p>15000000</p></td>
<td><p>If any channel has would have over this many elements when its subscription
queue is full, warn about it. If you have a 1,000,000 element array,
the warning would hapen at a subscription backlog of 16, as 16 *
1,000,000 is above this default threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_SUBSCRIPTION_BACKLOG_REDUCE_AT_WARN_LEVEL</p></td>
<td><p>“y” (“y”, “yes”, “1”, or “true”)</p></td>
<td><p>Automatically reduce subscription backlog for PVs that meet the warning
threshold.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_MIN_SUBSCRIPTION_BACKLOG</p></td>
<td><p>10</p></td>
<td><p>This is the default minimum, if we find ourselves above that threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>CAPROTO_MAX_SUBSCRIPTION_BACKLOG</p></td>
<td><p>1000</p></td>
<td><p>This is the default, per subscription.</p></td>
</tr>
<tr class="row-even"><td><p>CAPROTO_MAX_COMMAND_BACKLOG</p></td>
<td><p>10000</p></td>
<td><p>This is the maximum number of commands caproto will keep in a queue for
sending out to clients. This typically should not need adjustment.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">IOC Helper Environment Variables</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ENGINEER</p></td>
<td><p>“”</p></td>
<td><p>The engineer to report as owner of the IOC.</p></td>
</tr>
<tr class="row-odd"><td><p>LOCATION</p></td>
<td><p>“”</p></td>
<td><p>The location to report in IOC stats.</p></td>
</tr>
</tbody>
</table>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="servers.html" class="btn btn-neutral float-left" title="Servers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="shark.html" class="btn btn-neutral float-right" title="Shark (pcap/tcpdump parsing)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Daniel Allan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>